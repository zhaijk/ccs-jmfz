<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:score="http://thymeleafexamples">
<head>
  <meta charset="utf-8">
  <th:block th:replace="head-css.html"></th:block>
</head>
<body>	
<div class="box">
<div class="box-header with-border">
	 请输入卡信息
</div>
<div class="box-body with-border">
    <table style="width:100%">
    	<tr>
    		<td><input type="text" class="form-control pull-right" disabled id="cardcode" placeholder="请输入卡号"></td>
			<td>
				<select class="form-control" id="departs">
					<option value="all">选择卡类型</option>
					<option value="0">实物卡</option>
					<option value="1">价拨卡</option>
					<option value="2">机动卡</option>
				</select>
			</td>
			<td>
				<select class="form-control" id="departs">
					<option value="all">选择车辆</option>
					<th:block th:each="obj:${departmentInfos}">
					<option th:value="${obj.departmentCode}" th:text="${obj.departmentName}"></option>
					</th:block>					
				</select>
			</td> 
			<td>
				<select class="form-control" id="departs">
					<option value="all">选择油品</option>
					<th:block th:each="obj:${departmentInfos}">
					<option th:value="${obj.departmentCode}" th:text="${obj.departmentName}"></option>
					</th:block>					
				</select>
			</td>  
			<td>
				<select class="form-control" id="departs">
					<option value="all">选择卡有效期</option>
					<option value="all">当年</option>
					<option value="all">两年</option>
					<option value="all">十年</option>
				</select>
			</td> 
			<td><input type="text" class="form-control pull-right" id="inputcardcode" placeholder="请输入联系人"></td>
			<td><input type="text" class="form-control pull-right" id="inputcardcode" placeholder="请输入联系电话"></td>		</tr>
		<tr>	
			
			<td><input type="text" class="form-control pull-right" id="inputcardcode" placeholder="每月固定性指标"></td>
			<td><input type="text" class="form-control pull-right" id="fixcount" placeholder="单次加油限额"></td>
			<td><input type="text" class="form-control pull-right" id="buzhucount" placeholder="补助指标"></td>
			<td>
				<div class="input-group date">
                  <div class="input-group-addon">
                    <i class="fa fa-calendar" ></i>
                  </div>
                  <input type="text" readonly class="form-control pull-right" id="buzhudate" placeholder='补助过期日期'>
                </div>
            </td>  
			<td><input type="text" class="form-control pull-right" id="maxcount" placeholder="卡限额指标"></td> 
			<td colspan="2"><input type="text" class="form-control pull-right" id="memo" placeholder="备注"></td>		
    	</tr>
    	<tr>
    		<td colspan="4">
    			<button  id="readcardinfo" style="width:20%" class="btn btn-info " >读卡</button>
    			<button  id="validcard" style="width:20%" class="btn btn-info " >验证</button>
    			<button  id="resetcardinfo" style="width:20%" class="btn btn-info " >重置</button>
    			<button  id="providecard" style="width:20%" class="btn btn-info " >新增</button>
    		</td>
    		<td colspan="3">
    			<object id="dukaqi" CLASSID="CLSID:A9C48ED1-F5BB-4E90-B78E-31E076B92838" ></object>
    		</td>
    	</tr>
    </table>
    </div>
</div>
<div class="box">
<div class="box-body with-border">
<table id="cardinfo_table" class="table table-hover  table-bordered table-condensed" style="width:100%">
	<thead>
	<tr style="font-size: 16px; background-color: rgb(237, 241, 244); align: center">
	    <th style="width:3%">序号</th>
		<th style="width:5%">卡号</th>
	    <th style="width:5%">车牌号</th>
	    
		<th style="width:5%">部门</th>				
		<th style="width:5%">油品</th>				
        <th style="width:5%">固定指标</th>
		<th style="width:5%">指标类型</th>
	    <th style="width:5%">库余额</th>
		<th style="width:5%">卡有效期</th>
		<th style="width:5%">卡状态</th>
	</tr>
	</thead>
	<tbody>
	</tbody>
</table>
</div>
</div>    
<th:block th:replace="head-js.html"></th:block>
<script type='text/javascript' th:inline="javascript">
var table;
function loaddata(){
	table=$('#cardinfo_table').DataTable({	
		//'pageLength': 		7,
		'bDestroy': 		true,  
		'processing': 		true,
		'searching' : 		true,
		'lengthChange' : 	false,
		/* "select": {
   	        style: 'single',
   	        info: false
   	    }, */
   	    "ordering": false, // 禁止排序
		"ajax": {
        	"url": "card_operation_provide/datas",
        	"type": "get",
        	"data":{}
    	},
  		"columns": [
  			{data:"id"},
  			{data:"cardcode"},
  			{data:"autoCarCode"},
  			{data:"departmentname"},
  			{data:"oilType"},
  			{data:"destineGuideline"},
  			{data:"guidelinetype"},
  			{data:"cardCount"},
  			{data:"fillCardterm"},
  			{data:"cardstatus"}
  		],
		"oLanguage": { //国际化配置  
			"sProcessing" : "正在获取数据，请稍候...",    
			"sLengthMenu" : "显示 _MENU_ 条",    
			"sZeroRecords" : "没有您要搜索的内容",    
			"sInfo" : "记录数为 _TOTAL_ 条    当前 _PAGE_页",// _PAGE_ _START_ 到  _END_ 条记录 ",    
			"sInfoEmpty" : "记录数为0",    
			"sInfoFiltered" : "(全部记录数 _MAX_ 条)",    
			"sInfoPostFix" : "",    
			"sSearch" : "搜索",
			"sUrl" : "",    
			"oPaginate": {    
				"sFirst" : "首页",    
				"sPrevious" : "<<",    
				"sNext" : ">>",    
				"sLast" : "尾页"    
			}
		}    	
	})	
}
$(function(){
    loaddata()
    $('#buzhudate').datepicker({
        todayHighlight:true,    	
        keyboardNavigation:true,
        clearBtn:true,
        autoclose:true,
        language:'zh-Cn',
        format:'yyyy-mm-dd'
    })
}) 
var cardcode;
$("#readcardinfo").on('click',function(){
	card_operation(function(flag){
		cardcode=dukaqi.readcardinfo(6);
		console.info(cardcode);
		$("#cardcode").val(cardcode);
	})
})
$("#validcard").on('click',function(){
	alert('验证通过.....');
})
$("#resetcardinfo").on('click',function(){
	$("#cardcode").val('');
})
$("#providecard").on('click',function(){
	alert('卡发行成功.....');
})

</script>
</body>
</html>
