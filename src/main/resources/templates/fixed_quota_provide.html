<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:score="http://thymeleafexamples">
<head>
  <meta charset="utf-8">
  <title>固定指标发放</title>
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="css/ionicons.min.css">
  <link rel="stylesheet" href="css/bootstrap-table.min.css">  
  <!-- DataTables -->
  <link rel="stylesheet" href="css/dataTables.bootstrap.min.css">  
  <link rel="stylesheet" href="css/buttons.bootstrap.min.css">
  <link rel="stylesheet" href="css/select.bootstrap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/AdminLTE.min.css"> 
  <link rel="stylesheet" href="css/skins/skin-blue.min.css">

  <link href="css/bootstrap-editable.css" rel="stylesheet" />
  
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="js/html5shiv.min.js"></script>
  <script src="js/respond.min.js"></script>
  <![endif]-->
  <style >
 /*  editable-table-cell{
	  //background-color: yellow;
	 
	  "data-type": "text";
	  //"data-title": "用户名";
  } */
  /* inputclass{
  	width: 10px;
  } */
  .box-title{
  	position:absolute;
  	left:45%;
  	top:20px;
  }
  </style>
 </head>
<body>
<div class="box">          
<div class="box-header with-border">
<!-- 	<div class="col-md-2"><button class="btn btn-warning btn-block" >固定指标发放</button></div>
	
	<h3 class="box-title">固定指标发放统计表<span style="font-size:10px;">&nbsp;&nbsp;(单位：升)</span></h3>
 -->
 <button class="btn btn-warning btn-block" style="width:15%" onclick="privode();">固定指标发放</button>
 <h3 class="box-title">固定指标发放统计表</h3>	
</div>
<div class="box-body with-border">
<!-- <div class="pre-scrollable"> -->
<table  id="table_infos" class="table table-hover table-striped table-bordered table-condensed display"  style="width:100%">
<thead>
	<tr style="font-size:16px;background-color:#d3d7df;text-align:center;">
    	<th   style="width:10%;vertical-align: middle;text-align: center;;text-align:center" rowspan="2">部门名称</th>
		<th   colspan="3" th:each="obj:${oilInfos}" th:text="${obj.name+' (L)'}"></th>
	</tr>
	<tr style="font-size:10px;background-color:#d3d7df;text-align:center;">		
		<span th:each="obj:${oilInfos}">
		<th  >剩余指标量</th>
		<th  >实际发放量</th>
		<th  >固定发放量</th>
		</span>
	</tr>
</thead>
<tbody>
	<th:block th:each="obj:${departmentProvideInfos}">
    <tr  style="text-align:right" th:if="${obj.flag==1}" class="selected">
    	<td style="text-align:center" th:text="${obj.departmentName}"></td>  		
  		<th:block th:each="sum,state:${obj.oiltypeSum}">
  			<td th:if="${sum lt obj.fafangValue[state.index]}" th:text="${sum}"  style="color:red"></td>
  			<td th:unless="${sum lt obj.fafangValue[state.index]}" th:text="${sum}"></td>
  			<!-- <td th:else th:text="${sum}" ></td> -->  			
  			<td th:if="${sum lt obj.fafangValue[state.index]}" th:text="${obj.fafangValue[state.index]}"  style="color:blue" ></td>
  			<td th:unless="${sum lt obj.fafangValue[state.index]}" th:text="${obj.fafangValue[state.index]}" ></td>
  			<td th:text="${obj.fixedProvide[state.index]}"></td>
  			<!-- <td th:else th:text="${obj.fafangValue[state.index]}" ></td> -->
		</th:block>
    </tr>
 	<tr  style="text-align:right" th:unless="${obj.flag==1}" >
  		<td style="text-align:center" th:text="${obj.departmentName}"></td>  		
  		<th:block th:each="sum,state:${obj.oiltypeSum}">
  			<td th:if="${sum lt obj.fafangValue[state.index]}" th:text="${sum}"  style="color:red"></td>
  			<td th:unless="${sum lt obj.fafangValue[state.index]}" th:text="${sum}"></td>
  			<!-- <td th:else th:text="${sum}" ></td> -->  			
  			<td th:if="${sum lt obj.fafangValue[state.index]}" th:text="${obj.fafangValue[state.index]}"  style="color:blue" ></td>
  			<td th:unless="${sum lt obj.fafangValue[state.index]}" th:text="${obj.fafangValue[state.index]}" ></td>
  			<td th:text="${obj.fixedProvide[state.index]}"></td>
  			<!-- <td th:else th:text="${obj.fafangValue[state.index]}" ></td> -->
		</th:block>
    </tr>
    </th:block>
</tbody>
</table> 
</div>
</div>
<!-- </div> -->
<!-- jQuery 3 -->
<script src="js/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="js/bootstrap.min.js"></script>

<!-- <script src="js/bootstrap-table-editable.min.js"></script> -->
<script src="js/bootstrap-editable.js"></script>
<script src="js/bootstrap-table.min.js"></script>
<script src="js/bootstrap-table-editable.min.js"></script>
<!-- DataTables -->
<script src="js/jquery.dataTables.min.js"></script>
<script src="js/dataTables.bootstrap.min.js"></script>

<script src="js/dataTables.buttons.min.js"></script>
<script src="js/buttons.bootstrap.min.js"></script>
<script src="js/dataTables.select.min.js"></script>

<script src="js/adminlte.min.js"></script>

<!-- SlimScroll -->
<script src="js/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="js/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="js/adminlte.min.js"></script>
<script type='text/javascript' th:inline="javascript">
$(function(){	
	initTable();
});
function initTable(){
	$("#table_infos").DataTable({
		//"bDestroy":true,
   		//"bRetrieve":true,  
 		//"scrollY": 800,			//垂直滚动
 		//"scrollX": 800,			//垂直滚动
 		'bDestroy': 		true,  
		'processing': 		true,
		'paging': true,
		'ordering':  false,
		'lengthChange' : false,
		'info' : true,
		'searching' : false,
		'select': {
   	        style: 'multi',
   	        info: false
   	    },
		//"scrollX": false
        //"scrollX": false,		//横向滚动 */
        /* 'lengthChange' : true,	//长度变化
		'searching' : false,	//查询框
		'info' : false,			//选择行 信息
		'autoWidth' : true, 	//自动宽度
   	 	'paging': false,		//分页
     	'ordering':  false		//排序 */
	});
}	

function privode(){
	var objs=new Array();
	var datas=$("#table_infos").DataTable().rows('.selected').data();	
	for(var i=0;i<datas.length;i++){
		objs[i]=datas[i][0];
	}
	console.info(objs);
	$.ajax({
		type: 'POST',
		url: "department_fixed_quota_provide/provide",
		dataType:'text',
		data:{objs:objs},
		success:function(data){
			alert(data);
		},
		error:function(result){
			alert(result);
		}
	});
}
</script>
</body>
</html>
