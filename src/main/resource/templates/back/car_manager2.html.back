<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:score="http://thymeleafexamples">
<head>
  <meta charset="utf-8">
  <title>车辆管理</title>
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="css/ionicons.min.css">
  <link rel="stylesheet" href="css/jquery.dataTables.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="css/dataTables.bootstrap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/AdminLTE.min.css">
  <link rel="stylesheet" type="text/css" href="css/editor.dataTables.min.css">
  <!-- <style type="text/css">
  	.selected{background-color: #B0BED9;}
  </style> -->
 </head>
<body>
	<!-- 
	<div id="toolbar" class="btn-group">	
	<button id="addRow" type="button"  class="btn  btn-default">
		<span class="glyphicon glyphicon-plus" aria-hidden="false"></span>新增
	</button>
	<button id="updateRow" type="button" class="btn  btn-default">
		<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
	</button>
	<button id="deleteRow" type="button" class="btn  btn-default">
		<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
	</button>	
	<button id="confirmRow" type="button" class="btn  btn-default">
		<span class="glyphicon glyphicon-ok" aria-hidden="false"></span>确定
	</button>	
	</div>
	<span style="font-size:24px;position:relative;top:6px;left:16%">车辆信息</span>
  -->
			
<table id="car_infos" class="display table table-condensed table-hover">
<thead >
	<tr align="center">
		<th style="width:8%" >序号</th>
		<th style="width:14%" >车辆号牌</th>
		<th style="width:20%">所属部门</th>
		<th style="width:12%">车辆品牌</th>
		<th style="width:10%">建立日期</th>
		<th style="width:8%">使用人</th>
		<th style="width:8%">联系电话</th>
		 
	</tr>
</thead>
<tbody>
	<!-- <tr th:each="carInfo,stat : ${oilTypeInfos}" align="center">
		<td  th:text="${stat.count}"></td>
        <td  th:text="${carInfo.autoCarCode}"></td>
        <td th:text="${carInfo.departmentName}"></td>
        <td th:text="${carInfo.carBrandName}"></td>
        <td th:text="${carInfo.fastDate}"></td>
        <td th:text="${carInfo.driverName}"></td>
        <td th:text="${carInfo.telephoneNumber}"></td>
        <td th:text="${carInfo.note2}">
        <th th:text="${stat.index}">状态变量：index</th>
        <th th:text="${stat.count}">状态变量：count</th>
        <th th:text="${stat.size}">状态变量：size</th>
        <th th:text="${stat.current.userName}">状态变量：current</th>
        <th th:text="${stat.even}">状态变量：even****</th>
        <th th:text="${stat.odd}">状态变量：odd</th>
        <th th:text="${stat.first}">状态变量：first</th>
        <th th:text="${stat.last}">状态变量：last</th>
        </td>
        <td th:text="${carInfo.operator}"></td>
     </tr> -->
</tbody>
</table>
<!-- jQuery 3 -->
<script src="js/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="js/bootstrap.min.js"></script>
<!-- DataTables -->
<script src="js/jquery.dataTables.min.js"></script>
<script src="js/dataTables.bootstrap.min.js"></script>
<script src="js/dataTables.editor.min.js"></script>
<script src="js/adminlte.min.js"></script>
<!-- jQuery 3 -->
<script src="js/jquery-3.3.1.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="js/bootstrap.min.js"></script>
<!-- DataTables -->
<script src="js/jquery.dataTables.min.js"></script>
<script src="js/dataTables.bootstrap.min.js"></script>
<script src="js/adminlte.min.js"></script>
<script src="js/dataTables.buttons.min.js"></script>
<script src="js/dataTables.select.min.js"></script>
<script src="js/dataTables.editor.min.js"></script>
<script type='text/javascript' th:inline="javascript">
var editor;
//var cartypeinfo;
//var departinfo;
$(function(){
	
	var cartypeinfo=[[${carTypeInfos}]];
	var departInfos=[[${departInfos}]];
	var array_car=new Array();
	var array_depart=new Array();
	for(i in cartypeinfo){
		array_car[i]={name:cartypeinfo[i].autoCarType2,label:cartypeinfo[i].name};		
	}
	for(i in departInfos){
		array_depart[i]={name:departInfos[i].departmentCode,label:departInfos[i].departmentName};		
	}
	//alert(departinfo);
	editor = new $.fn.dataTable.Editor( {
	        ajax: "car-manager/update",
	        table: "#car_infos",
	        idSrc:  'id',
	        "fields": [{
	        	label: "车辆号牌",
	        	name: "autoCarCode",
	        	type: "text"
	        }, {
	        	label: "所属部门",
	        	name: "departmentName",
	        	type: "select",
                options: array_depart
	        	
	        }, {
	        	label: "车辆品牌",
	        	name: "carBrandName",
	        	type:  'select',
                options: array_car
	        }, {
	        	label: "建立日期",
	        	name: "fastDate",
	            type: "datetime"
	        },{
	        	label: "使用人",
	        	name: "driverName"
	        }, {
	        	label: "联系电话",
	        	name: "telephoneNumber"
	        }, {
	        	label: "操作人",
	        	name: "note2"
	        }]
	    } );
    var table=$('#car_infos').DataTable({		
		/* "destroy":true,//消除重定义出错
		"bPaginate":false,//是否使用分页
		"bFilter": false, //是否使用搜索
		"sInfo":true,
		"bAutoWidth":false,		
		"ordering": false,	
		"searching": true, //禁用原生搜索
		"pagingType": "simple_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
		"bProcessing" : true, //DataTables载入数据时，是否显示‘进度’提示  
		"bServerSide" : false, //是否启动服务器端数据导入  
		"bStateSave" : true, //是否打开客户端状态记录功能,此功能在ajax刷新纪录的时候不会将个性化设定回复为初始化状态  
		"bJQueryUI" : true, //是否使用 jQury的UI theme  
		"bPaginate" : true,// 分页按钮  
		"bFilter" : false,// 搜索栏  
		"bLengthChange" : true,// 每行显示记录数  
		"iDisplayLength" : 10,// 每页显示行数  
		"bSort" : false,// 排序  
		"bInfo" : true,// Showing 1 to 10 of 23 entries 总记录数没也显示多少等信息  		
		"bAutoWidth" : true, //是否自适应宽度 //"bScrollInfinite" : false, //是否启动初始化滚动条  
		"bScrollCollapse" : true, //是否开启DataTables的高度自适应，当数据条数不够分页数据条数的时候，插件高度是否随数据条数而改变  
		"bPaginate" : true, //是否显示（应用）分页器  
		"bInfo" : true, //是否显示页脚信息，DataTables插件左下角显示记录数  
		"sPaginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
		"bSort" : false, //是否启动各个字段的排序功能  
	  */
	  	//"ajax": "car-manager/datas",
	  	//"bLengthChange" : true,// 每行显示记录数  
	  	"pagingType": "full_numbers",
	  	"bJQueryUI" : false, //是否使用 jQury的UI theme 
	  	"ajax": "car-manager/datas",
	  	"columns": [
	  		{ "data": "id" },
            { "data": "autoCarCode" },
            { "data": "departmentName" },
            { "data": "carBrandName" },
            { "data": "fastDate" },
            { "data": "driverName" },
            { "data": "telephoneNumber" }
        ],
        "Selected": true,
 	  	//"bServerSide": true,
	    "bFilter":true,
		"bLengthChange":false,
		"bDestroy":true,
		"bRetrieve":true,
		"bSort" : true, //是否启动各个字段的排序功能 
		/* "fields": [ {
        	label: "序号",
        	name: "id"
        }, {
        	label: "车辆号牌",
        	name: "autoCarCode"
        }, {
        	label: "所属部门",
        	name: "departmentName"
        }, {
        	label: "车辆品牌",
        	name: "carBrandName"
        }, {
        	label: "建立日期",
        	name: "fastDate",
            type: "datetime"
        }, {
        	label: "使用人",
        	name: "driverName"
        }, {
        	label: "联系电话",
        	name: "telephoneNumber"
        }, {
        	label: "操作人",
        	name: "note2"
        }], */
		/* "fields": [ {
        	label: "车辆号牌",
        	name: "autoCarCode"
        }, {
        	label: "所属部门",
        	name: "departmentName"
        }, {
        	label: "车辆品牌",
        	name: "carBrandName"
        }, {
        	label: "建立日期",
        	name: "fastDate",
            type: "datetime"
        }, {
        	label: "使用人",
        	name: "driverName"
        }, {
        	label: "联系电话",
        	name: "telephoneNumber"
        }, {
        	label: "操作人",
        	name: "note2"
        }], */
//		"ajax": "car-manager/datas",
/*        "columns": [
            { "data": "autoCarCode" },
            { "data": "departmentName" },
            { "data": "carBrandName" },
            { "data": "fastDate" },
            { "data": "driverName" },
            { "data": "telephoneNumber" }
        ],
		"fields": [ {
			name: "车辆号牌",
            label: "autoCarCode"
        }, {
        	name: "所属部门",
            label: "departmentName"
        }, {
        	name: "车辆品牌",
            label: "carBrandName"
        }, {
        	name: "建立日期",
            label: "fastDate",
            type: "datetime"
        }, {
        	name: "使用人",
            label: "driverName"
        }, {
        	name: "联系电话",
            label: "telephoneNumber"
        }, {
        	name: "操作人",
        	label: "note2"
        }
    ],
    select: {
        style:    'os',
        selector: 'td:first-child'
    },
    buttons: [
        { extend: "create", editor: editor },
        { extend: "edit",   editor: editor },
        { extend: "remove", editor: editor }
    ], */
/* 		"processing":true,
		"serverSide":true, */
		/* columnDefs: [
            {
                targets: 7,
                render: function (a, b, c, d) {
                    var context =
                    {
                        func: [
                            {"name": "修改", "fn": "edit(\'" + c.name + "\',\'" + c.position + "\',\'" + c.salary + "\',\'" + c.start_date + "\',\'" + c.office + "\',\'" + c.extn + "\')", "type": "primary"},
                            {"name": "删除", "fn": "del(\'" + c.name + "\')", "type": "danger"}
                        ]
                    };
                    var html = template(context);
                    return html;
                }
            }

        ], */
        'pageLength' : 10,
		'lengthChange' : false,
		'searching' : true,
		'ordering' : false,
		'info' : true,
		'autoWidth' : false,
    	"oLanguage": { //国际化配置  
			"sProcessing" : "正在获取数据，请稍后...",    
			"sLengthMenu" : "显示 _MENU_ 条",    
			"sZeroRecords" : "没有您要搜索的内容",    
			"sInfo" : "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",    
			"sInfoEmpty" : "记录数为0",    
			"sInfoFiltered" : "(全部记录数 _MAX_ 条)",    
			"sInfoPostFix" : "",    
			"sSearch" : "搜索",    
			"sUrl" : "",    
			"oPaginate": {    
				"sFirst" : "首页",    
				"sPrevious" : "<<",    
				"sNext" : ">>",    
				"sLast" : "尾页"    
			}
    	}
	});
  
	// Activate an inline edit on click of a table cell
   /*  $('#car_infos').on( 'click', 'tbody td', function (e) {
        editor.inline(this);
    } ); */
/*    $('#car_infos').on( 'click','tbody td', function (data) {
       editor.inline( this);
       console.log(data);
   } );
    /* editor.inline( $('#car_infos tbody tr:first-child td:last-child') ); */
    
    /* var counter=0;
    $('#addRow').on( 'click', function () {
    	table.row.add([]).draw();
    } ); */
 
    // Automatically add a first row of data
    var row ;
    $('#car_infos').on( 'click', 'tr', function () {
    	//alert($(this).hasClass('sel'));
        if ($(this).hasClass('selected') ) {
            $(this).removeClass('selected');            
        }
        else {
            table.$('tr.selected').removeClass('selected');
            $(this).addClass('selected');
        }
        row=$(this);
    } );
    $('#updateRow').on( 'click', function () {
    	editor.inline(row);
    } );
    var counter = 1;
    
    $('#addRow').on( 'click', function () {
 /*        table.row.add([autoCarCode : "WJ24-12029",
        	autoCarColor2 :0,
        	autoCarType2:25,
        	carBrand:null,
        	carBrandName:"小轿车 ",
        	carIdentify:null,
        	counter:0,
        	departmentCode:"241505000000",
        	departmentName:"指挥学院",
        	driverName:null,
        	fastDate:"2010-10-21",
        	id:0,
        	note2:null,
        	operator:"0501",
        	passportName:0,
        	passportNumber:null,
        	telephoneNumber:null,
        	tflag:0]).draw();        
        //counter++; */
    } ); */
    //$('#addRow').click();
    // Automatically add a first row of data
   /*  $('#deleteRow').click( function () {
    	console.log(table.row('.selected'));
    	confirm('确认删除');
    	console.log(table.row('.selected'));
        table.row('.selected').remove().draw();
    } ); */
 // Display the buttons
    new $.fn.dataTable.Buttons( table, [
        { extend: "create", editor: editor },
        { extend: "edit",   editor: editor },
        { extend: "remove", editor: editor }
    ] );
 
    table.buttons().container()
        .appendTo( $('.col-sm-6:eq(0)', table.table().container() ) );
})
</script>
</body>
</html>
